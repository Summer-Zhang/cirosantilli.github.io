<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Redis Cheat - Ciro Santilli</title>
    
    <link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013.jpg" />

    
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css"/>

    
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"/>

    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.1/css/all.css">

    
    <script src="/main.js"></script>
    <link rel="stylesheet" href="/main.css"/>
    <link rel="stylesheet" href="/header-link.css"/>
    <link rel="stylesheet" href="/syntax.css"/>
  </head>
  <body>
    <header>
      <a class="home" href="/">Ciro Santilli</a>
      <span class="social">
        <a href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw"></i></a>
        <a href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw"></i></a>
        <a href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw"></i></a>
        <a href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw"></i></a>
        <a href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw"></i></a>
        
        <a href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw"></i></a>
        <a href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
    </header>
    <main>
        <h1 class="page-title">Redis Cheat</h1>
        
        <p>A key value server, also known as NoSQL database.</p>

<p>Default port is TCP/6379.</p>

<p>Values can have an expire time.</p>

<p>Once the server is running, command line REPL interface:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis-cli
</code></pre></div></div>

<h1 id="vs-mysql">vs MySQL</h1>

<ul>
  <li><a href="http://stackoverflow.com/questions/3966689/when-to-use-redis-instead-of-mysql-for-php-applications">http://stackoverflow.com/questions/3966689/when-to-use-redis-instead-of-mysql-for-php-applications</a></li>
  <li><a href="http://www.mysqlperformanceblog.com/2009/08/27/looking-at-redis/">http://www.mysqlperformanceblog.com/2009/08/27/looking-at-redis/</a></li>
</ul>

<p>TODO check everything bellow, in particular if MySQL can do each of those things.</p>

<p>Can store complex data structures like lists, sets and maps, MySQL only represents those structures indirectly with tables and columns.</p>

<p>Loads all of it’s data on RAM, persists it by default to disk. Therefore faster than MySQL which always reads from disk TODO check but it can store much less data. TODO possible to not load everything on RAM?</p>

<p>Only saves modifications to disk from time to time, thus lower durability, and greater performance.</p>

<p>Pipelining support: multiple operations on a single HTTP request.</p>

<h1 id="things-redis-cant-do-that-rdmss-can">Things Redis can’t do that RDMSs can</h1>

<p>As far as we can tell:</p>

<ul>
  <li><code class="highlighter-rouge">SUM</code></li>
</ul>

<h1 id="set-and-get">SET and GET</h1>

<p>Set value to string:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET key "val space"
</code></pre></div></div>

<p>Get value:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET key
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"val space"
</code></pre></div></div>

<p>No quotes:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET key val
GET key
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"val"
</code></pre></div></div>

<p>Only works for value without spaces:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET key val space
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(error) ERR syntax error
</code></pre></div></div>

<h1 id="incr">INCR</h1>

<p>Increment integer (concurrency safe):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET key 0
INCR key
GET key
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"1"
</code></pre></div></div>

<p>Only works for integers:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET key a
INCR key
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(error) ERR value is not an integer or out of range
</code></pre></div></div>

<h1 id="delete">DELETE</h1>

<p>Undefined key returns nil:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET undefined_key
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(nil)
</code></pre></div></div>

<p>Delete value:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SET key
DEL key
GET key
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(nil)
</code></pre></div></div>

<h1 id="data-types">Data types</h1>

<h2 id="string">String</h2>

<p>Base data type.</p>

<h2 id="integer">Integer</h2>

<p>There is no integer data type, only strings that can be converted to integers or not.</p>

<h2 id="list">List</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LPUSH list a
LPUSH list b
RPUSH list c
</code></pre></div></div>

<p>Get entire list:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LRANGE list 0 -1
</code></pre></div></div>

<p>Output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1) "b"
2) "a"
3) "c"
</code></pre></div></div>

    </main>
    <footer>
        <div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a> unless noted</div>
        <div>Suggestions and corrections: <a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">https://github.com/cirosantilli/cirosantilli.github.io/issues</a></div>
        <div>Website source code: <a href="https://github.com/cirosantilli/cirosantilli.github.io">https://github.com/cirosantilli/cirosantilli.github.io</a></div>
        <div>Website version: <a href="https://github.com/cirosantilli/cirosantilli.github.io/commit/c46a277d600713c8e1a97f83729fbc81cc6bd4b2">c46a277d600713c8e1a97f83729fbc81cc6bd4b2</a></div>
        <div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
    </footer>
    

    
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>

    
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
    <script>
      $('.data-table').dataTable({
        //"aaSorting": [[0,'asc'], [1,'asc'], [2, 'asc'], [3, 'asc']],
        "aaSorting": [],
        "bFilter": false,
        "bInfo": false,
        "bPaginate": false
      });
    </script>

    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          jax: ["input/TeX","output/HTML-CSS"],
          displayAlign: "left",
          displayIndent: "20px"
      });
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </body>
</html>
